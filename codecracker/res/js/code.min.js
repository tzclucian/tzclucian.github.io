function boot(){$("#init_button").removeAttr("disabled"),$("#time").removeAttr("disabled"),$("#code_length").removeAttr("disabled"),$("#time_loss").removeAttr("disabled"),$("#code-initialised-status").html("waiting..."),$("#verify_button").hide(),$("#setup_button").hide(),$("#init_button").show(),$("#init_section").show(),TIMER&&TIMER.stop(),CODE_LENGTH=0,CODE="",TIME=0,DISTANCE=0,SECONDS_LOSS_PER_TRY=10,TOTAL_TIME_LOSS=0,IS_SETUP_DONE=!1,IS_INITIALISED=!1,TRY_INDEX=0,CORRECT_CLASS="correct",WRONG_CLASS="wrong",MISPLACED_CLASS="misplaced",INDEX_CLASS="index",$("#code_input").val(""),TIMER=void 0}function bodyLoad(){boot(),TIME=parseInt($("#time").val()),TIMER=$(".clock").FlipClock(TIME,{countdown:!0,clockFace:"MinuteCounter",autoStart:!1})}function initialiseCodeParameters(){CODE_LENGTH=parseInt($("#code_length").val()),TIME=parseInt($("#time").val()),SECONDS_LOSS_PER_TRY=parseInt($("#time_loss").val()),$("#init_button").attr("disabled",!0),$("#init_button").hide(),IS_INITIALISED=!0,$("#time").attr("disabled",!0),$("#code_length").attr("disabled",!0),$("#time_loss").attr("disabled",!0),$("#code-initialised-status").html("Initialised"),TIMER=$(".clock").FlipClock(TIME,{countdown:!0,clockFace:"MinuteCounter",autoStart:!1,callbacks:{interval:function(){0===TIMER.getTime().time&&(TIMER.stop(),$("#fail_modal").modal("show"),$("#init_button").attr("disabled","disabled"),$("#setup_button").attr("disabled","disabled"),$("#setup_button").hide(),$("#verify_button").attr("disabled","disabled"),$("#verify_button").hide(),$("#keypad").attr("disabled","disabled"),IS_INITIALISED=!1)}}})}function updateCode(t){var e=document.forms[0].code,i=!1;e.value.indexOf(t)>-1&&(i=!0),e.value.length<CODE_LENGTH&&IS_INITIALISED&&!i?e.value=e.value+t:console.log("Limit exceeded! Ignoring..."),e.value.length===CODE_LENGTH&&!IS_SETUP_DONE&&IS_INITIALISED&&($("#setup_button").removeAttr("disabled"),$("#setup_button").show()),e.value.length===CODE_LENGTH&&IS_SETUP_DONE&&($("#verify_button").removeAttr("disabled"),$("#verify_button").show())}function setupCode(){CODE=$("#code_input").val(),IS_SETUP_DONE=!0,$("#code_input").val(""),$("#setup_button").attr("disabled","disabled"),$("#setup_button").hide(),TIMER.start(),$("#init_section").hide(),console.log("Setup CODE: "+CODE)}function verifyCode(){var t=$("#code_input").val(),e=$("<tr></tr>").attr("id",TRY_INDEX);$("<td> #"+(TRY_INDEX+1)+"</td>").addClass(INDEX_CLASS).appendTo(e);for(var i=0;i<CODE_LENGTH;i++){var o="",d=(" "+CODE).slice(1),a=t[i];d[i]===a?(o=CORRECT_CLASS,d[i]="/"):o=d.includes(a)?MISPLACED_CLASS:WRONG_CLASS;var _=TRY_INDEX.toString()+i.toString();$("<td>"+a+"</td>").attr("id",_).addClass(o).appendTo(e)}0==TRY_INDEX?e.appendTo($("#results")):$("#"+(TRY_INDEX-1)).before(e),t===CODE&&(TIMER.stop(),$("#timer").innerHTML="SUCCESS!",$("#dialog-code").html("Code was successfully cracked: "+CODE),$("#success_modal").modal("show")),TIMER.getTime().subSeconds(SECONDS_LOSS_PER_TRY),$("#code_input").val(""),$("#verify_button").attr("disabled","disabled"),$("#verify_button").hide(),TRY_INDEX+=1}var CODE_LENGTH=0,CODE="",TIME=0,DISTANCE=0,SECONDS_LOSS_PER_TRY=10,TOTAL_TIME_LOSS=0,IS_SETUP_DONE=!1,IS_INITIALISED=!1,TRY_INDEX=0,CORRECT_CLASS="correct",WRONG_CLASS="wrong",MISPLACED_CLASS="misplaced",INDEX_CLASS="index",TIMER=void 0;